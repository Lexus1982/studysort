<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shell</title>
</head>
<body>
<p align="justify">
    <b>Сортировка Шелла (англ. shell sort)</b> - алгоритм сортировки, являющийся усовершенствованным
    вариантом сортировки вставками. Идея метода Дональда Шелла состоит в сравнении элементов, стоящих не только
    рядом, но и на определённом расстоянии друг от друга; иными словами - это сортировка вставками, но с
    предварительными &laquo;грубыми&raquo; проходами. Сортировка Шелла была названа в честь её
    изобретателя Дональда Шелла, который опубликовал этот алгоритм в 1959 году.</p>
<h2 align="center"><b>Алгоритм</b></h2>
<p align="justify">Пусть имеется некий абстрактный массив данных <b>&laquo;A&raquo;</b>, множество составных элементов
    которого
    (обозначаемых как <b>a<sub>i</sub></b>, где <b>i</b> - любое целое число из интервала <b>[0; n - 1]</b>)
    требуется упорядочить методом Дональда Шелла. Упорядочение будет производиться в рамках последовательно выбираемых
    пар вида <b>(a<sub>i</sub>, a<sub>j</sub>)</b>, где <b>j = i &plusmn; d</b>, причём <b>i</b>, <b>j</b>,
    <b>d</b> - целые числа.
</p>
<p align="justify"><b>Этапы алгоритма:</b></p>
<ol>
    <li>Инициализация: задание начального значения <b>d</b>, которое впоследствии будет уменьшаться (о выборе значения
        <b>d</b> см. ниже);
    </li>
    <li>Основная часть:
        <ol>
            <li>Упорядочение массива:
                <ol>
                    <li>Выбор пары элементов, индексы которых отличаются на <b>d</b>;</li>
                    <li>Определение разности элементов выбранной пары;</li>
                    <li>Упорядочение элементов в рамках пары согласно разности значений;</li>
                    <li>Переход к следующей паре;</li>
                </ol>
            </li>
            <li>Уменьшение значения <b>d</b>;</li>
            <li>Проверка: если <b>d &gt; 0 </b> - вернуться к пункту <b>&quot;1&quot;</b> основной части (и если <b>d =
                1</b> -
                для проведения обычной сортировки вставками);
            </li>
        </ol>
    </li>
    <li>Завершение работы.</li>
</ol>
<h2 align="center"><b>Эффективность алгоритма</b></h2>
<p align="justify">Эффективность сортировки Шелла, - в определённых случаях, - обеспечивается тем, что
    элементы &laquo;быстрее&raquo; встают на свои места (в простых методах сортировки, - например,
    пузырьковой, - каждая перестановка двух элементов уменьшает количество инверсий в списке максимум на 1, а при
    сортировке Шелла - это число может быть больше).</p>
<p align="justify">Невзирая на то, что сортировка Шелла во многих случаях медленнее, чем быстрая сортировка - она
    имеет ряд преимуществ:</p>
<ul>
    <li>Отсутствие потребности в памяти под стек</li>
    <li>Отсутствие деградации при неудачных наборах данных - быстрая сортировка легко деградирует до <b>O(n<sup>2</sup>)</b>,
        что
        хуже, чем худшее гарантированное время для сортировки Шелла.
    </li>
</ul>
<h2 align="center"><b>Выбор длины промежутков</b></h2>
<p align="justify">Среднее время работы алгоритма зависит от длин промежутков - <b>d</b>, на которых будут находиться
    сортируемые
    элементы исходного массива ёмкостью <b>n</b> на каждом шаге алгоритма. Существует несколько подходов к выбору этих
    значений:
</p>
<ul>
    <li>первоначально используемая Шеллом последовательность длин промежутков: <b>d<sub>1</sub> = n / 2, d<sub>i</sub> =
        d<sub>i - 1</sub> / 2, d<sub>k</sub> = 1}</b> в
        худшем случае, сложность алгоритма составит <b>O(n<sup>2</sup>)</b>;
    </li>
    <li>предложенная Хиббардом последовательность: все значения <b>2<sup>i</sup> - 1 &le; n, i &isin; N</b>.
        такая последовательность шагов приводит к алгоритму сложностью <b>O(n<sup>3 / 2</sup>)</b>;
    </li>
    <li>предложенная Седжвиком последовательность: <b>d<sub>i</sub> = 9 * 2<sup>i</sup> - 9 * 2<sup>i / 2</sup> + 1</b>,
        если <b>i</b> чётное и <b>d<sub>i</sub> = 8 * 2<sup>i</sup> - 6 * 2<sup>(i + 1) / 2</sup> + 1</b>, если <b>i</b>
        нечётное. При использовании таких приращений средняя сложность алгоритма составляет: <b>O(n<sup>7 / 6</sup>)</b>,
        а в худшем случае порядка
        <b>O(n<sup>4 / 3</sup>)</b>. При использовании формулы Седжвика следует остановиться на значении
        <b>inc[s - 1]</b>, если <b>3 * inc[s] &gt; size</b>;
    </li>
    <li>предложенная Праттом последовательность: все значения <b>2<sup>i</sup> * 3<sup>j</sup> &le; n / 2, где i,
        j &isin; N</b>; в таком случае сложность
        алгоритма составляет <b>O(n log<sup>2</sup> (n))</b>;
    </li>
    <li>эмпирическая последовательность Марцина Циура (последовательность A102549 в OEIS): <b>d &isin; {1, 4, 10, 23,
        57, 132, 301, 701, 1750}</b>;
        является одной из лучших для сортировки массива ёмкостью приблизительно до 4000 элементов;
    </li>
    <li>эмпирическая последовательность, основанная на числах Фибоначчи: <b>d &isin; {F<sub>n</sub>}</b>;
    </li>
    <li>все значения <b>(3<sup>j</sup> - 1) &le; n, j &isin; N</b>; такая последовательность шагов приводит к алгоритму
        сложностью <b>O(n<sup>3 / 2</sup>)</b>.
    </li>
</ul>
</body>
</html>